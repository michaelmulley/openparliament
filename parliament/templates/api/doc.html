{% extends "base.html" %}

{% block breadcrumbs %}<li>API Documentation</li>{% endblock %}

{% block content %}
<div class="row align-right">
	<div class="columns main-col"><p>Our <code>API</code> provides access to the structured data underlying this site. It requires a certain level of technical knowledge to use it, but if you've got the know-how, you can use it to quickly build your own tools using Parliamentary data.</p></div>
</div>

<div class="row">
	<div class="context-col"><h2>Basics</h2></div>
	<div class="main-col">
	<p><b>URL structures</b> mirror that of the main site, but on the <code>api.openparliament.ca</code> domain. Most pages will have a JSON link in the footer leading to the equivalent API content.</p>
	<p><b>Everything is JSON.</b> But, when you access the page in your browser (or, specifically, with a client whose <code>Accept</code> header indicates a preference for <code>text/html</code> over <code>application/json</code>), you'll get a friendly formatted page instead. Here, <a href="http://api.openparliament.ca/votes/">take a look</a>.</p>
	<p><b>It&rsquo;s hypertext.</b> Most resources link to related resources. Start with <a href="http://api.openparliament.ca/bills/">bills</a>, <a href="http://api.openparliament.ca/votes/">votes</a>, <a href="http://api.openparliament.ca/politicians/">MPs</a>, <a href="http://api.openparliament.ca/debates/">debates</a>, or <a href="http://api.openparliament.ca/committees/">committees</a>, and you should be able to find your way to what you're looking for. Resources are identified by their URLs, which are of course guaranteed to be unique; if you need a field to use as a primary key for objects, I suggest the URL or a fragment of it. When filtering based on a relationship with another object, you use the URL, <a href="http://api.openparliament.ca/bills/?sponsor_politician=/politicians/randall-garrison/">like so</a>.</p>
	<p><b>Many resources can be filtered.</b> The list of available filters appears on each resource&rsquo;s <a href="http://api.openparliament.ca/votes/">friendly API page</a>. You can use simple operators for most numeric and date fields: <i>gt</i> (greater than), <i>gte</i> (greater than or equal), <i>lt</i> (less than), <i>lte</i> (can you guess?). Here's an <a href="http://api.openparliament.ca/votes/?date__lte=2011-01-01">example</a>.</p>
	<p><b>There&rsquo;s a rate limit.</b> If you make tons of concurrent requests, you'll get <code>HTTP 429 Too Many Requests</code>. Get in touch if this is a problem for you.</p>
	<p><b>Things change.</b> I'm not yet making an ironclad backwards-compatibility promise. If you&rsquo;re using this, you should sign up for a low-traffic <a href="https://groups.google.com/d/forum/openparliament-api">mailing list</a> where I&rsquo;ll post about any breaking changes. To indicate that you're expecting responses that match the current version of the API, set a <code>API-Version</code> header to <code>v1</code>, or include <code>?version=v1</code> in your query string. Responses will include an <code>API-Version</code> header with the version of the response.</p>
	<p><b>Don&rsquo;t be shy.</b> The API doesn&rsquo;t currently enforce this, but you should put your email in <code>User-Agent</code> headers&mdash;that way I can look at how people are using the API, and contact you if your requests are causing problems. And please get in touch with comments and questions.</p>
	</div>
</div>

<div class="row">
<div class="context-col"><h2>Bulk data</h2></div>
<div class="main-col"><p>This kind of API is not especially suited to downloading lots of data at once. For that, <a href="/data-download/">download</a> a copy of this site's database.</p></div>
</div>

<div class="row">
<div class="context-col"><h2>Elsewhere</h2></div>
<div class="main-col">
	{% comment %} <p>To <b>find ridings or MPs</b> based on addresses or postal codes, use <a href="http://represent.opennorth.ca/">Represent</a>.</p> {% endcomment %}
	<p><a href="https://ourcommons.ca">ourcommons.ca</a> has, in recent years, started to include lots of XML data&mdash;that's the original source for 90% of the data on this site. Hansard and <a href="https://www.parl.ca/legisinfo/en/overview">LegisINFO</a> pages will have little orange XML buttons on them.</p>
	<p>The <a href="http://www.lipad.ca/">LIPAD</a> project contains structured digital versions of Hansard since 1900.</p>
</div>
</div>

<div class="row">
<div class="context-col"><h2>Copyright</h2></div>
<div class="main-col">
	<p>All content on this site comes from Parliament, and so is copyright of King Charles. <a href="https://www.ourcommons.ca/en/important-notices">Speaker&rsquo;s Permission</a> establishes some of the terms of use for some of the content.</p>
	<p>This site holds no copyright on any data accessible through this API. But providing attribution via a link back to openparliament.ca would be awfully nice of you.</p>
</div>
</div>

<div class="row">
<div class="context-col"><h2>Freedom to tinker</h2></div>
<div class="main-col"><p>The code behind this site is available on <a href="https://www.github.com/michaelmulley/openparliament">GitHub</a>, as free software. It's in Python, mostly.</p></div>
</div>

{% endblock content %}